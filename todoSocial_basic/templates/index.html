{% extends 'base.html' %}

{% block head %}
<title>ToDo Social APP</title>
{% endblock %}

{% block body %}
<section class="App Content">
    <h1>ToDo Social APP</h1>
    <h2>Login or Register</h2>

    <!-- Login Form -->
    <h3>Login</h3>
    <form method="POST" action="{{ url_for('login') }}">
        {{ login_form.hidden_tag() }}
        <p>
            {{ login_form.username.label }}<br>
            {{ login_form.username }}<br>
            {% for error in login_form.username.errors %}
                <span style="color: red;">{{ error }}</span>
            {% endfor %}
        </p>
        <p>
            {{ login_form.password.label }}<br>
            {{ login_form.password }}<br>
            {% for error in login_form.password.errors %}
                <span style="color: red;">{{ error }}</span>
            {% endfor %}
        </p>
        <p>{{ login_form.submit }}</p>
    </form>

    <!-- Register Form -->
    <h3>Register</h3>
<form method="POST" action="{{ url_for('register') }}">
    {{ register_form.hidden_tag() }}
    <p>
        {{ register_form.username.label }}<br>
        {{ register_form.username }}<br>
        {% for error in register_form.username.errors %}
            <span style="color: red;">{{ error }}</span>
        {% endfor %}
    </p>
    <p>
        {{ register_form.email.label }}<br>
        {{ register_form.email }}<br>
        {% for error in register_form.email.errors %}
            <span style="color: red;">{{ error }}</span>
        {% endfor %}
    </p>
    <p>
        {{ register_form.password.label }}<br>
        {{ register_form.password }}<br>
        {% for error in register_form.password.errors %}
            <span style="color: red;">{{ error }}</span>
        {% endfor %}
    </p>
    <p>{{ register_form.submit }}</p>
</form>

    <!-- Password Reset Option -->
    <h3>Forgot your password?</h3>
    <form method="GET" action="{{ url_for('reset_request') }}">
        <input type="submit" value="Reset Password">
    </form>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <ul>
                {% for message in messages %}
                    <li style="color: red;">{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}
</section>
{% endblock %}